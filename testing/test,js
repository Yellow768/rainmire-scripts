//Block script

function redstone(t) {
  t.block.executeCommand(t.power)
  if (t.power != 1) return
  var NPCs = t.block.world.getAllEntities(2)
  for (var i = 0; i < NPCs.length; ++i) {
    if (NPCs[i].isAlive()) {
      NPCs[i].storeddata.put("curr_health", NPCs[i].health) // save the current health of the NPC to stored data
      NPCs[i].reset()
      NPCs[i].health = NPCs[i].storeddata.get("curr_health") + 5 //now we set the health of the NPC to that saved value plus 5
      if (NPCs[i].health > NPCs[i].maxHealth) NPCs[i].health = NPCs[i].maxHealth //if the health exceeds max health, set it to be max health
    }
  }
}
